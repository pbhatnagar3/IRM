<script type="text/javascript">function chUPDATE(e,t,n){$(".chapter_index").each(function(r){if(n){if(r<t){if(e==parseInt(r+1)){e=parseInt(t)+1}}}});return e}function indexUPDATE(e,t,n){var r=$("#chList").attr("ih");var i=$("#Question").attr("r");$(".chapter_index").each(function(t){if(i==0){switch(n){case"Question":if(t<r){$(this).css({display:"none"})}else{$(this).css({display:"inline"})}break;case"Practice":if(t>=r){$(this).css({display:"none"})}else{$(this).css({display:"inline"})}if(e>r){e=r}break;case"Review":$(this).css({display:"inline"});break;default:alert("ITS_jquery.php: error")}}else{$(this).css({display:"inline"})}if($(this).text()==e){$(this).attr("id","current")}else{$(this).attr("id","")}})}function navUPDATE(e){$(".ITS_navigation[name=updateReview_index]").attr("ch",e);var t=$("#slider").slider("option","value");var n=$("#slider").slider("option","max");if(t>=n){$("#ITS_nav_next").css({display:"none"})}else{$("#ITS_nav_next").css({display:"block"})}if(t<2){$("#ITS_nav_prev").css({display:"none"})}else{$("#ITS_nav_prev").css({display:"block"})}if(n<1){$("#reviewNavTxt").css({display:"none"})}else{$("#reviewNavTxt").css({display:"block"})}if(n<5){$("#slider").css({display:"none"})}else{$("#slider").css({display:"block"})}}function ratingUPDATE(e){$("#ITS_rate").children().not(":radio").hide();$("#ITS_rate").stars({disabled:true,captionEl:$("#stars-cap")});$("#ITS_rate").css({display:"block"});var t=$("#ITS_rate").data("stars");if(t.options.value==0){$("#ITS_rate").stars({captionEl:$("#stars-cap"),disabled:false,callback:function(t,n,r){if(r){$.get("ajax/ITS_screen.php",{ajax_args:"recordRating",ajax_data:e+"~"+r},function(e){})}}})}}function slider(e,t){$("#slider").slider({value:t,min:1,max:t,step:1,slide:function(e,t){$("#reviewNavTxt").html(t.value+" / "+$(this).slider("option","max"))},stop:function(t,n){$.get("ajax/ITS_screen.php",{ajax_args:"reviewUpdate",ajax_data:e+","+(n.value-1)},function(t){e=$(".chapter_index#current").text();navUPDATE(e);$("#N2").html(t);imageBox();mathJax();var n=$("#ratingContainer").attr("qid");ratingUPDATE(n)})}})}function imageBox(){$("a.ITS_question_img").fancybox({type:"image",closeClick:true,aspectRatio:true,padding:5,helpers:{overlay:{closeClick:true,speedOut:300,showEarly:false,css:{background:"rgba(255, 255, 255, 0)"}},title:{type:"inside"}}})}function mathJax(){MathJax.Hub.Queue(["Typeset",MathJax.Hub])}function getMSG(){var e='<div class="ITS_MESSAGE"><ul><li>ITS Assignments 1 - 4 <br>have closed.</li><li>Your answers <br> are available for review.</li></div>';$("#contentContainer").html(e)}$(document).ready(function(){var e=$("#Question").attr("view");if(e==0){getMSG()}var t=4;$("#ITS_rate").children().not(":radio").hide();$("#ITS_rate").stars({showTitles:false,cancelShow:false,captionEl:$("#stars-cap"),callback:function(e,t,n){jQuery.data(document.body,"foo",52)}});imageBox();mathJax();$(".icon#tagg_icon").click(function(){$(".ITS_instruction").slideToggle("normal")});$(".icon#Tag_icon").mouseover(function(){$(".ITS_tags").slideToggle("normal")});$("div.tagsMore#header").click(function(){$("div.tagsMore#list").slideToggle("fast")});$("#messageContainer").click(function(){$("#messageContainerContent").slideToggle("slow")});$("#adminContainer").click(function(){$("#adminContainerContent").slideToggle("slow")});$("#scoreContainer").click(function(){$("#scoreContainerContent").slideToggle("slow")});$("#feedbackContainer").click(function(){$("#feedbackContainerContent").slideToggle("slow")});$("#dialog").dialog({autoOpen:true,resizable:false,width:425});var n=$("#Question").attr("ch");indexUPDATE(n,e,"Question");$("#Practice").live("click",function(){if($(this).attr("choice_mode")=="concept"){return}var e=$(this).attr("view");var t=$(this).attr("id");var n=$(".chapter_index#current").text().replace(/^\s+|\s+$/g,"");$("[name=header]").each(function(e){if($(this).attr("id")==t){$(this).children("a").attr("id","current")}else{$(this).children("a").attr("id","")}});$(".chapter_index").each(function(e){$(this).css({display:"inline"})});indexUPDATE(n,e,"Practice");var n=$(".chapter_index#current").text().replace(/^\s+|\s+$/g,"");$.get("ajax/ITS_screen.php",{ajax_args:"practiceMode",ajax_data:n},function(e){$("#contentContainer").html(e);imageBox();mathJax();var t=$("#ratingContainer").attr("qid");ratingUPDATE(t)})});$("#Question").live("click",function(){var e=$(this).attr("view");var t=$(this).attr("id");if($(this).attr("choice_mode")=="concept"){$.get("ajax/ITS_screen.php",{ajax_args:"nextQuestion",ajax_data:"concept"},function(e){$("#contentContainer").html(e);imageBox();mathJax()});$("[name=header]").each(function(e){if($(this).attr("id")==t){$(this).children("a").attr("id","current")}else{$(this).children("a").attr("id","")}});if(e==0){getMSG()}return}var n=$(".chapter_index#current").text();var r=$("#chList").attr("ih");$("[name=header]").each(function(e){if($(this).attr("id")==t){$(this).children("a").attr("id","current")}else{$(this).children("a").attr("id","")}});if(e==0){getMSG()}else{n=chUPDATE(n,r,e);indexUPDATE(n,e,"Question");$.get("ajax/ITS_screen.php",{ajax_args:"newChapter",ajax_data:n+",question"},function(e){$("#contentContainer").html(e);mathJax();var t=$("#ratingContainer").attr("qid");ratingUPDATE(t);imageBox()})}});$("#Review").live("click",function(){if($(this).attr("choice_mode")=="concept"){return}var t=$(this).attr("id");var n=$(".chapter_index#current").text();$("[name=header]").each(function(e){if($(this).attr("id")==t){$(this).children("a").attr("id","current")}else{$(this).children("a").attr("id","")}});var r=$("#qAvail"+n).html();indexUPDATE(n,e,"Review");$.get("ajax/ITS_screen.php",{ajax_args:"reviewMode",ajax_data:n+","+r},function(e){$("#contentContainer").html(e);var t=$("#ratingContainer").attr("qid");ratingUPDATE(t);imageBox();mathJax();var r=$("#N1").attr("qN");var i=$("#qAvail"+n).html();slider(n,r);navUPDATE(n)});indexUPDATE(n,e,"Review")});$(".chapter_index").live("click",function(){var e=$(this).text().replace(/^\s+|\s+$/g,"");var t=$("#Question").attr("view");var n=$("[name=header] a#current").parent().attr("id");indexUPDATE(e,t,n);switch(n){case"Practice":var r="newChapter";var i="Chapter "+e;$.get("ajax/ITS_screen.php",{ajax_args:r,ajax_data:e+","+n.toLowerCase()},function(e){$("#contentContainer").html(e);imageBox();mathJax()});break;case"Question":var t=$("#"+n).attr("view");if(t==0){getMSG()}else{if(e=="Survey"){r="getSurvey";i=e}else{r="newChapter";i="Chapter "+e}$.get("ajax/ITS_screen.php",{ajax_args:r,ajax_data:e.toLowerCase()+","+n.toLowerCase()},function(e){$("#contentContainer").html(e);imageBox();mathJax()})}break;case"Review":if(e=="Survey"){i=e;$.get("ajax/ITS_screen.php",{ajax_args:"surveyMode",ajax_data:e+",0"},function(e){$("#contentContainer").html(e)})}else{var s=$("#qAvail"+e).html();r="reviewUpdate";i="Chapter "+e;$.get("ajax/ITS_screen.php",{ajax_args:r,ajax_data:e+","+s},function(t){$("#N2").html(t);slider(e,s);imageBox();mathJax();navUPDATE(e);if(s>0){$("#N1").css({display:"block"});$("#slider").slider("option","max",s);$("#slider").slider("option","value",s);$("#reviewNavTxt").html(s+" / "+s);navUPDATE(e);var n=$("#ratingContainer").attr("qid");ratingUPDATE(n)}else{$("#N1").css({display:"none"})}})}break}});$(".ITS_navigation[name=updateReview_index]").live("click",function(e){var t=$(this).attr("ch");var n=$(this).attr("del");if(t=="Survey"){$.get("ajax/ITS_screen.php",{ajax_args:"surveyMode",ajax_data:t+","+n},function(e){$("#contentContainer").html(e);imageBox();mathJax()})}else{var r=parseInt(n)+parseInt($("#slider").slider("option","value"))-1;$.get("ajax/ITS_screen.php",{ajax_args:"reviewUpdate",ajax_data:t+","+r},function(e){$("#reviewNavTxt").html(r+1+" / "+$("#slider").slider("option","max"));$("#slider").slider({value:r+1});navUPDATE(t);$("#N2").html(e);var n=$("#ratingContainer").attr("qid");ratingUPDATE(n);imageBox();mathJax()})}});$(".ITS_navigation[name=update_index]").live("click",function(e){var t=$(this).attr("mode");$.get("ajax/ITS_screen.php",{ajax_args:"getContent",ajax_data:t},function(e){$("#contentContainer").html(e);imageBox();mathJax()})});$(".ansCheck").live("click",function(){var e="#"+$(this).attr("for");$("#errorContainer").css({display:"none"});var t=e.split("_");for(var n=1;n<=t[4];n++){if(n==t[2]){$(this).addClass("ansCheck_sel");$(this).attr("checked",true)}else{$("#check_"+t[1]+"_"+n+"_"+t[3]+"_"+t[4]).attr("checked",false);$("#label_check_"+t[1]+"_"+n+"_"+t[3]+"_"+t[4]).removeClass("ansCheck_sel")}}});$("span[name=ITS_MC]").live("click",function(){var e=$(this).attr("id");$("#ratingContainer").css({display:"block"});$("#errorContainer").css({display:"none"});$("span[name=ITS_MC]").each(function(t){if(e==$(this).attr("id")){$(this).removeClass("CHOICE_ACTIVE").addClass("CHOICE_SELECTED")}else{$(this).removeClass("CHOICE_SELECTED").addClass("CHOICE_ACTIVE")}})});$("#ITS_submit").live("click",function(){var e=$(this).attr("ch");var t=$(this).attr("qid");var n=$(this).attr("qtype");var r=$(this).attr("t");var i=$(this).attr("mode");var s=new Array;var o=true;if(i=="concept"){var u=$(".navConcept").attr("tid")}else{u=""}switch(n.toUpperCase()){case"M":$(".ansCheck_sel").each(function(e){var t=$(this).attr("id").split("_");if(!s[t[4]-1]){s[t[4]-1]=""}s[t[2]-1]=t[3]});break;case"MC":var a="ABCDEFGHIJKLMNOPQRSTUVWXYZ";$('span[class="CHOICE_SELECTED"]').each(function(e){var t=$(this).attr("id").split("_");s[0]=a.charAt(t[1]-1)});break;case"C":var f=$("#answersCount").val();var l=0;var c="";for(var h=0;h<f;h++){c="#ITS_TA"+h;s[h]=$(c).val();if($(c).val()==""){o=false}}break;case"P":var l=$("#ITS_TA").val();s[0]=l;break;default:}var p=s.join();if(p&&o){var d=$(this).attr("c");switch(i){case"survey":$.get("ajax/ITS_screen.php",{ajax_args:"recordSurveyAnswer",ajax_data:t+"~"+n+"~"+p+"~"+d+"~"+e+"~"+r+"~"+i+"~"+u},function(e){$("#contentContainer").html(e);imageBox();mathJax()});break;default:$.get("ajax/ITS_screen.php",{ajax_args:"recordChapterAnswer",ajax_data:t+"~"+n+"~"+p+"~"+d+"~"+e+"~"+r+"~"+i+"~"+u},function(e){$("#contentContainer").html(e);$("#ITS_rate").css({display:"block"});$("#ITS_nav_next").css({display:"block"});ratingUPDATE(t);imageBox();mathJax()})}if(i=="concept"){var v=$("#logout").attr("uid");var m=$("#logout").attr("course");$.get("ajax/ITS_concepts.php",{choice:"updateConceptInfo",tid:u},function(e){$(".navConceptInfo").html(e)})}$.get("ajax/ITS_screen.php",{ajax_args:"updateScores",ajax_data:""},function(e){$("#scoreContainerContent").html(e)})}else{$("#errorContainer").html("Please select an answer.").css({display:"inline"});$(this).attr("disabled",false)}});$("#ITS_skip").live("click",function(){var e=$(this).attr("ch");var t=$(this).attr("qid");var n=$(this).attr("qtype");var r=$(this).attr("t");var i=$(this).attr("mode");if(i=="concept"){var s=$(".navConcept").attr("tid")}else{s=""}$.get("ajax/ITS_screen.php",{ajax_args:"skip",ajax_data:t+"~"+n+"~"+e+"~"+r+"~"+i+"~"+s},function(e){$("#contentContainer").html(e);$.get("ajax/ITS_screen.php",{ajax_args:"concept",ajax_data:t},function(e){$("#QuesConcept").html(e)});imageBox();mathJax()})})})</script>
